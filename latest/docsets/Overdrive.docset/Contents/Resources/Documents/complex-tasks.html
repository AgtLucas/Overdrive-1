<!DOCTYPE html>
<html lang="en">
  <head>
    <title>Complex Tasks  Reference</title>
    <link rel="stylesheet" type="text/css" href="css/jazzy.css" />
    <link rel="stylesheet" type="text/css" href="css/highlight.css" />
    <meta charset="utf-8">
    <script src="js/jquery.min.js" defer></script>
    <script src="js/jazzy.js" defer></script>
    <meta charset="utf-8">
<meta http-equiv="x-ua-compatible" content="ie=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

<meta name="application-name" content="Overdrive">
<meta name="description" content="Powerful task based API in Swift with focus on type safety, concurrency and multi threading.">

<meta name="rating" content="General">
<meta http-equiv="set-cookie" content="name=value; expires=date; path=url">
<meta name="url" content="https://github.com/arikis/Overdrive">
<meta name="google" value="notranslate">

<!-- Twitter card -->
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:site" content="@SaidSikira">
<meta name="twitter:creator" content="@SaidSikira">
<meta name="twitter:title" content="Overdrive">
<meta name="twitter:url" content="https://github.com/arikis/Overdrive">
<meta name="twitter:description" content="Powerful task based API in Swift with focus on type safety, concurrency and multi threading">
<meta name="twitter:image" content="http://i.imgur.com/ZI34Ho1.png">

<style>
header.header {
  background-color: #2D3E4F;
}
</style>

<!-- Google tracking code -->
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-58231067-4', 'auto');
  ga('send', 'pageview');

</script>
  </head>
  <body>


    <a title="Complex Tasks  Reference"></a>

    <header class="header">
      <p class="header-col header-col--primary">
        <a class="header-link" href="index.html">
          Overdrive Docs
        </a>
         (100% documented)
      </p>
    
        <p class="header-col header-col--secondary">
          <a class="header-link" href="https://github.com/arikis/Overdrive">
            <img class="header-icon" src="img/gh.png"/>
            View on GitHub
          </a>
        </p>
    
    </header>

    <p class="breadcrumbs">
      <a class="breadcrumb" href="index.html">Overdrive Reference</a>
      <img class="carat" src="img/carat.png" />
      Complex Tasks  Reference
    </p>

    <div class="content-wrapper">
      <nav class="navigation">
        <ul class="nav-groups">
          <li class="nav-group-name">
            <a class="nav-group-name-link" href="Intro.html">Intro</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="getting-started.html">Getting Started</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="installation.html">Installation</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="state-machine.html">State Machine</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="complex-tasks.html">Complex Tasks</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a class="nav-group-name-link" href="Classes.html">Classes</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Classes/Task.html">Task</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Classes/TaskQueue.html">TaskQueue</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Classes/InlineTask.html">InlineTask</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Classes.html#/s:C9Overdrive8TaskBase">TaskBase</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a class="nav-group-name-link" href="Protocols.html">Protocols</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Protocols/TaskObserver.html">TaskObserver</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Protocols/TaskCondition.html">TaskCondition</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Protocols/TaskQueueDelegate.html">TaskQueueDelegate</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a class="nav-group-name-link" href="Enums.html">Enums</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Enums/Result.html">Result</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Enums/TaskConditionResult.html">TaskConditionResult</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Enums/TaskConditionError.html">TaskConditionError</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a class="nav-group-name-link" href="More information.html">More information</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="license.html">License</a>
              </li>
            </ul>
          </li>
        </ul>
      </nav>
      <article class="main-content">

        <section class="section">
          <div class="section-content">
            
            <a href='#dealing-with-complex-tasks' class='anchor' aria-hidden=true><span class="header-anchor"></span></a><h1 id='dealing-with-complex-tasks'>Dealing with complex tasks</h1>

<p>In most of the scenarios we encounter while we are developing applications, we tackle complexity. And the key to make complex behaviors work is to decouple things one from another so that they can be tested and debugged easily. That almost always comes with a price, especially if you are dealing with asynchronous tasks.</p>

<p>Task dependencies can be used to construct complex task graphs with exact ordering of execution. More importantly, task dependency are not tied to any specific queue. Dependencies are no different than any other tasks - they behave the same. Only difference is that when you add a dependency to a task, task will wait until dependency is executed and finished with work.</p>
<a href='#example' class='anchor' aria-hidden=true><span class="header-anchor"></span></a><h2 id='example'>Example</h2>

<p>Imaging you are building application for displaying some photos from the internet. You need to download the photos, present them and cache them. You could build one monolith structure or class that does all this but you&rsquo;ll run into problems soon, most likely because you&rsquo;ll be dealing with loads of asynchronous methods and completion blocks that are hard to debug.</p>

<p>With Overdrive, you can simplify this process and even gain additional performance and speed.</p>

<p>In this case, you will have two main defined tasks:</p>

<ol>
<li>Task that downloads a photo (<code>DownloadPhotoTask</code>)</li>
<li>Task that caches downloaded photo on the disk (<code>CachePhotoTask</code>)</li>
</ol>

<p><code>PresentPhotoTask</code> will be the main task that can be used by the user. By utilizing dependency model, we can add <code>DownloadPhotoTask</code>  as a dependency of the <code>CachePhotoTask</code>, and be sure that dependency will be executed first.</p>

<p>Let&rsquo;s say our photo is located at <code>https://swiftable.io/logo.png</code>. After you implement all three tasks you could create their instances like this:</p>
<pre class="highlight swift"><code><span class="k">let</span> <span class="nv">downloadPhotoTask</span> <span class="o">=</span> <span class="kt">DownloadPhotoTask</span><span class="p">(</span><span class="nv">url</span><span class="p">:</span> <span class="s">"https://swiftable.io/logo.png"</span><span class="p">)</span>
<span class="k">let</span> <span class="nv">cachePhotoTask</span> <span class="o">=</span> <span class="kt">CachePhotoTask</span><span class="p">()</span>
</code></pre>

<p>Now, in order to add dependency to the <code>cachePhotoTask</code>, you use <code>add(dependency:)</code> method:</p>
<pre class="highlight swift"><code><span class="n">cachePhotoTask</span><span class="o">.</span><span class="nf">add</span><span class="p">(</span><span class="nv">dependency</span><span class="p">:</span> <span class="n">downloadPhotoTask</span><span class="p">)</span>
</code></pre>

<p>All, that&rsquo;s left now is to execute tasks on queues. We can use different queues for any task:</p>
<pre class="highlight swift"><code><span class="k">let</span> <span class="nv">downloadQueue</span> <span class="o">=</span> <span class="kt">TaskQueue</span><span class="p">()</span> <span class="c1">// Downloading can happen on any queue</span>
<span class="k">let</span> <span class="nv">cacheQueue</span> <span class="o">=</span> <span class="kt">TaskQueue</span><span class="p">(</span><span class="nv">qos</span><span class="p">:</span> <span class="o">.</span><span class="n">background</span><span class="p">)</span> <span class="c1">// All caching should be done on background queue</span>

<span class="c1">// Execute tasks</span>
<span class="n">downloadQueue</span><span class="o">.</span><span class="nf">add</span><span class="p">(</span><span class="nv">task</span><span class="p">:</span> <span class="n">downloadPhotoTask</span><span class="p">)</span>
<span class="n">cacheQueue</span><span class="o">.</span><span class="nf">add</span><span class="p">(</span><span class="nv">task</span><span class="p">:</span> <span class="n">cachePhotoTask</span><span class="p">)</span>
</code></pre>

<p>At this point, tasks will be executed in this order:</p>

<ol>
<li><code>downloadPhotoTask</code> is executed first</li>
<li>After successful execution of <code>downloadPhotoTask</code>, <code>cachePhotoTask</code> will be executed on the background queue.</li>
</ol>
<a href='#conclusion' class='anchor' aria-hidden=true><span class="header-anchor"></span></a><h2 id='conclusion'>Conclusion</h2>

<p>Task dependency model can be used to construct complex tasks graphs with very simple syntax in order to achieve better performance, testability and in the end, faster execution.</p>

          </div>
        </section>


      </article>
    </div>
    <section class="footer">
      <p>&copy; 2016 <a class="link" href="swiftable.io" target="_blank" rel="external">Swiftable</a>. All rights reserved. (Last updated: 2016-11-12)</p>
      <p>Generated by <a class="link" href="https://github.com/realm/jazzy" target="_blank" rel="external">jazzy ♪♫ v0.7.2</a>, a <a class="link" href="http://realm.io" target="_blank" rel="external">Realm</a> project.</p>
    </section>
  </body>
</div>
</html>

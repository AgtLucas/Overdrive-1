<!DOCTYPE html>
<html lang="en">
  <head>
    <title>Getting Started  Reference</title>
    <link rel="stylesheet" type="text/css" href="css/jazzy.css" />
    <link rel="stylesheet" type="text/css" href="css/highlight.css" />
    <meta charset="utf-8">
    <script src="js/jquery.min.js" defer></script>
    <script src="js/jazzy.js" defer></script>
    <meta charset="utf-8">
<meta http-equiv="x-ua-compatible" content="ie=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

<meta name="application-name" content="Overdrive">
<meta name="description" content="Powerful task based API in Swift with focus on type safety, concurrency and multi threading.">

<meta name="rating" content="General">
<meta http-equiv="set-cookie" content="name=value; expires=date; path=url">
<meta name="url" content="https://github.com/arikis/Overdrive">
<meta name="google" value="notranslate">

<!-- Twitter card -->
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:site" content="@SaidSikira">
<meta name="twitter:creator" content="@SaidSikira">
<meta name="twitter:title" content="Overdrive">
<meta name="twitter:url" content="https://github.com/arikis/Overdrive">
<meta name="twitter:description" content="Powerful task based API in Swift with focus on type safety, concurrency and multi threading">
<meta name="twitter:image" content="http://i.imgur.com/ZI34Ho1.png">

<!-- Facebook | Open Graph -->
<meta property="fb:app_id" content="1156145697774339">
<meta property="og:url" content="https://arikis.github.io/Overdrive">
<meta property="og:type" content="website">
<meta property="og:title" content="Overdrive">
<meta property="og:image" content="http://i.imgur.com/ZI34Ho1.png">
<meta property="og:description" content="Powerful task based API in Swift with focus on type safety, concurrency and multi threading">
<meta property="og:site_name" content="Overdrive">
<meta property="og:locale" content="en_US">
<meta property="article:author" content="Said Sikira">

<!-- Custom CSS -->
<style>
header.header {
  background-color: #2D3E4F;
}

body {
  font-family: ".SFNSText-Regular", "San Francisco", -apple-system, Roboto, "Segoe UI", "Helvetica Neue", "Lucida Grande", sans-serif !important;
}
</style>

<!-- Google analytics -->

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-58231067-4', 'auto');
  ga('send', 'pageview');

</script>
    <script src="js/lunr.min.js" defer></script>
    <script src="js/typeahead.jquery.js" defer></script>
    <script src="js/jazzy.search.js" defer></script>
  </head>
  <body>


    <a title="Getting Started  Reference"></a>

    <header class="header">
      <p class="header-col header-col--primary">
        <a class="header-link" href="index.html">
          Overdrive Docs
        </a>
        
      </p>
    
      <p class="header-col--secondary">
        <form role="search" action="search.json">
          <input type="text" placeholder="Search documentation" data-typeahead>
        </form>
      </p>
    
        <p class="header-col header-col--secondary">
          <a class="header-link" href="https://github.com/arikis/Overdrive">
            <img class="header-icon" src="img/gh.png"/>
            View on GitHub
          </a>
        </p>
    
    </header>

    <p class="breadcrumbs">
      <a class="breadcrumb" href="index.html">Overdrive Reference</a>
      <img class="carat" src="img/carat.png" />
      Getting Started  Reference
    </p>

    <div class="content-wrapper">
      <nav class="navigation">
        <ul class="nav-groups">
          <li class="nav-group-name">
            <a class="nav-group-name-link" href="Intro.html">Intro</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="getting-started.html">Getting Started</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="installation.html">Installation</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="state-machine.html">State Machine</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="complex-tasks.html">Complex Tasks</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="unit-testing.html">Unit Testing</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a class="nav-group-name-link" href="Classes.html">Classes</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Classes/Task.html">Task</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Classes/TaskQueue.html">TaskQueue</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Classes/InlineTask.html">InlineTask</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Classes.html#/s:C9Overdrive8TaskBase">TaskBase</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a class="nav-group-name-link" href="Protocols.html">Protocols</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Protocols/TaskObserver.html">TaskObserver</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Protocols/TaskCondition.html">TaskCondition</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Protocols/TaskQueueDelegate.html">TaskQueueDelegate</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a class="nav-group-name-link" href="Enums.html">Enums</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Enums/Result.html">Result</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Enums/TaskConditionResult.html">TaskConditionResult</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Enums/TaskConditionError.html">TaskConditionError</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a class="nav-group-name-link" href="More information.html">More information</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="license.html">License</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a class="nav-group-name-link" href="Other Guides.html">Other Guides</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="intro.html">Intro</a>
              </li>
            </ul>
          </li>
        </ul>
      </nav>
      <article class="main-content">

        <section class="section">
          <div class="section-content">
            
            <a href='#getting-started' class='anchor' aria-hidden=true><span class="header-anchor"></span></a><h1 id='getting-started'>Getting started</h1>

<p>Our apps constantly do work. The faster you react to user input and produce an output, the more likely is that the user will continue to use your application. As our applications grow in complexity, the more and more work needs to be done. You need to start thinking about how to categorize and optimize work, how to make that work more efficient, more optimized and finally, faster. In most cases that doesn&rsquo;t end very well because you need to know a lot about concurrency, multithreading etc. - it&rsquo;s a very complex field. You need to know all API specifics before you are able to write something.</p>

<p>Overdrive was created as a result of that struggle. It is a framework that exposes several simple concepts which are made on top of complex system frameworks that enable multithreading, concurrency and most importantly, more speed.</p>

<p>This guide will walk you through some basic Overdrive concepts.</p>
<a href='#topics' class='anchor' aria-hidden=true><span class="header-anchor"></span></a><h3 id='topics'>Topics:</h3>

<ul>
<li><a href="#tasks">Tasks</a></li>
<li><a href="#example-task-subclass">Example task</a></li>
<li><a href="#task-configuration">Task configuration</a></li>
<li><a href="#queues">Task queues</a></li>
<li><a href="#task-execution">Task execution</a></li>
</ul>
<a href='#tasks' class='anchor' aria-hidden=true><span class="header-anchor"></span></a><h2 id='tasks'>Tasks</h2>

<p>Unit of work in Overdrive is called a <strong>Task</strong>. Any task is exposed as a <code>Task&lt;T&gt;</code> class that you create subclass of.</p>

<p>Inside a subclass, you override <code>run()</code> method that is used to execute any work (synchronous or asynchronous). That may be fetching data from the internet or retrieving user location.</p>

<p>To finish work in the task, you pass your task result to the <code>finish(with: )</code> method. This method takes <code>Result&lt;T&gt;</code> as an argument (<code>.value(T)</code> or an <code>.error(Error)</code>). By using <code>T</code>, you task results are bound to be type-safe. If you create a subclass of <code>Task&lt;Int&gt;</code>, you would be only able to finish operation with <code>.value(Int)</code> or an error.</p>
<a href='#example-task-subclass' class='anchor' aria-hidden=true><span class="header-anchor"></span></a><h3 id='example-task-subclass'>Example task subclass</h3>

<p>Let&rsquo;s say we want to create an task for fetching logo from the internet. Logo is located <a href="https://swiftable.io/logo.png"><strong>here</strong></a>. Since it&rsquo;s a logo image, we&rsquo;ll <code>UIImage</code> class to represent it.</p>
<pre class="highlight swift"><code><span class="kd">class</span> <span class="kt">GetLogoTask</span><span class="p">:</span> <span class="kt">Task</span><span class="o">&lt;</span><span class="kt">UIImage</span><span class="o">&gt;</span> <span class="p">{</span>

  <span class="k">override</span> <span class="kd">func</span> <span class="nf">run</span><span class="p">()</span> <span class="p">{</span>
      <span class="k">let</span> <span class="nv">logoURL</span> <span class="o">=</span> <span class="kt">URL</span><span class="p">(</span><span class="nv">string</span><span class="p">:</span> <span class="s">"https://swiftable.io/logo.png"</span><span class="p">)</span><span class="o">!</span>

      <span class="k">do</span> <span class="p">{</span>
          <span class="k">let</span> <span class="nv">logoData</span> <span class="o">=</span> <span class="k">try</span> <span class="kt">Data</span><span class="p">(</span><span class="nv">contentsOf</span><span class="p">:</span> <span class="n">logoURL</span><span class="p">)</span>
          <span class="k">let</span> <span class="nv">image</span> <span class="o">=</span> <span class="kt">UIImage</span><span class="p">(</span><span class="nv">data</span><span class="p">:</span> <span class="n">logoData</span><span class="p">)</span><span class="o">!</span>
          <span class="nf">finish</span><span class="p">(</span><span class="nv">with</span><span class="p">:</span> <span class="o">.</span><span class="nf">value</span><span class="p">(</span><span class="n">image</span><span class="p">))</span> <span class="c1">// finish with image</span>
      <span class="p">}</span> <span class="k">catch</span> <span class="p">{</span>
          <span class="nf">finish</span><span class="p">(</span><span class="nv">with</span><span class="p">:</span> <span class="o">.</span><span class="nf">error</span><span class="p">(</span><span class="n">error</span><span class="p">))</span> <span class="c1">// finish with error if any</span>
      <span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre>
<a href='#task-configuration' class='anchor' aria-hidden=true><span class="header-anchor"></span></a><h3 id='task-configuration'>Task configuration</h3>

<p>To configure a task, you must create an instance of it.</p>
<pre class="highlight swift"><code><span class="k">let</span> <span class="nv">task</span> <span class="o">=</span> <span class="kt">GetLogoTask</span><span class="p">()</span>
</code></pre>

<p>Tasks can provide information about the finish result. You can use <code>onValue:</code> and <code>onError:</code> methods to define what happens when task finishes.</p>
<pre class="highlight swift"><code><span class="n">task</span>
  <span class="o">.</span><span class="n">onValue</span> <span class="p">{</span> <span class="n">image</span> <span class="k">in</span>
    <span class="nf">print</span><span class="p">(</span><span class="n">image</span><span class="p">)</span> <span class="c1">// UIImage object</span>
  <span class="p">}</span><span class="o">.</span><span class="n">onError</span> <span class="p">{</span> <span class="n">error</span> <span class="k">in</span>
    <span class="nf">print</span><span class="p">(</span><span class="n">error</span><span class="p">)</span>
  <span class="p">}</span>
</code></pre>

<p>Tasks can also be retried if they finished with error. Just add <code>retry()</code> at the end of task configuration.</p>
<pre class="highlight swift"><code><span class="n">task</span><span class="o">.</span><span class="nf">retry</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
</code></pre>
<a href='#queues' class='anchor' aria-hidden=true><span class="header-anchor"></span></a><h2 id='queues'>Queues</h2>

<p>Task queues are in charge of executing tasks in most efficient way. When you add a task to the queue, queue will evaluate task and wait for it to be ready for execution. Once the task is ready, queue will execute it. Execution starts with overridden <code>run()</code> method in your task subclass and ends with called <code>finish(with:)</code> method or by task cancellation.</p>

<p>All task queues are executing tasks in multithreaded environment depending on your hardware. For example, you may add 4 tasks to the task queue and task queue will execute them all four of them at the same time which is perfect for the execution speed.</p>

<p>Task queues are objects exposed as (<a href="https://arikis.github.io/Overdrive/latest/Classes/TaskQueue.html"><code>TaskQueue</code></a>) classes. Each task queue is internally backed up with <code>Foundation.DispatchQueue</code>, so that you get all benefits of GDC for free. To create a <code>TaskQueue</code> object, simply initialize it:</p>
<pre class="highlight swift"><code><span class="k">let</span> <span class="nv">taskQueue</span> <span class="o">=</span> <span class="kt">TaskQueue</span><span class="p">()</span>
</code></pre>

<p>If you want to run your tasks on the specific dispatch queue, you can initialize it with <code>queue</code> parameter.</p>
<pre class="highlight swift"><code><span class="k">let</span> <span class="nv">someDispatchQueue</span> <span class="o">=</span> <span class="kt">DispatchQueue</span><span class="p">(</span><span class="nv">name</span><span class="p">:</span> <span class="s">"MyQueue"</span><span class="p">)</span>
<span class="k">let</span> <span class="nv">queue</span> <span class="o">=</span> <span class="kt">TaskQueue</span><span class="p">(</span><span class="nv">queue</span><span class="p">:</span> <span class="n">someDispatchQueue</span><span class="p">)</span>
</code></pre>

<p>If you want to assign specific Quality Of Service class, you can pass it to the init with <code>qos</code> parameter.</p>
<pre class="highlight swift"><code><span class="k">let</span> <span class="nv">queue</span> <span class="o">=</span> <span class="kt">TaskQueue</span><span class="p">(</span><span class="nv">qos</span><span class="p">:</span> <span class="o">.</span><span class="n">background</span><span class="p">)</span>
</code></pre>

<p>Or, you can use predefined queues which are associated with app main queue and the app background queue.</p>
<pre class="highlight swift"><code><span class="kt">TaskQueue</span><span class="o">.</span><span class="n">main</span> <span class="c1">// Application UI main queue</span>
<span class="kt">TaskQueue</span><span class="o">.</span><span class="n">background</span> <span class="c1">// associated with Background queue</span>
</code></pre>
<a href='#task-execution' class='anchor' aria-hidden=true><span class="header-anchor"></span></a><h2 id='task-execution'>Task execution</h2>

<p>After the task is configured with the completion blocks, you can execute it by adding it to the <code>TaskQueue</code>.</p>
<pre class="highlight swift"><code><span class="k">let</span> <span class="nv">task</span> <span class="o">=</span> <span class="kt">GetLogoTask</span><span class="p">()</span>
<span class="k">let</span> <span class="nv">queue</span> <span class="o">=</span> <span class="kt">TaskQueue</span><span class="p">()</span>
<span class="n">queue</span><span class="o">.</span><span class="nf">add</span><span class="p">(</span><span class="nv">task</span><span class="p">:</span> <span class="n">task</span><span class="p">)</span>
</code></pre>

          </div>
        </section>


      </article>
    </div>
    <section class="footer">
      <p>&copy; 2017 <a class="link" href="http://swiftable.io" target="_blank" rel="external">Swiftable</a>. All rights reserved. (Last updated: 2017-04-29)</p>
      <p>Generated by <a class="link" href="https://github.com/realm/jazzy" target="_blank" rel="external">jazzy ♪♫ v0.7.5</a>, a <a class="link" href="http://realm.io" target="_blank" rel="external">Realm</a> project.</p>
    </section>
  </body>
</div>
</html>

<!DOCTYPE html>
<html lang="en">
  <head>
    <title>Overdrive  Reference</title>
    <link rel="stylesheet" type="text/css" href="css/jazzy.css" />
    <link rel="stylesheet" type="text/css" href="css/highlight.css" />
    <meta charset="utf-8">
    <script src="js/jquery.min.js" defer></script>
    <script src="js/jazzy.js" defer></script>
    <meta charset="utf-8">
<meta http-equiv="x-ua-compatible" content="ie=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

<meta name="application-name" content="Overdrive">
<meta name="description" content="Powerful task based API in Swift with focus on type safety, concurrency and multi threading.">

<meta name="rating" content="General">
<meta http-equiv="set-cookie" content="name=value; expires=date; path=url">
<meta name="url" content="https://github.com/arikis/Overdrive">
<meta name="google" value="notranslate">

<!-- Twitter card -->
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:site" content="@SaidSikira">
<meta name="twitter:creator" content="@SaidSikira">
<meta name="twitter:title" content="Overdrive">
<meta name="twitter:url" content="https://github.com/arikis/Overdrive">
<meta name="twitter:description" content="Powerful task based API in Swift with focus on type safety, concurrency and multi threading">
<meta name="twitter:image" content="http://i.imgur.com/ZI34Ho1.png">

<style>
header.header {
  background-color: #2D3E4F;
}
</style>

<!-- Google tracking code -->
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-58231067-4', 'auto');
  ga('send', 'pageview');

</script>
  </head>
  <body>


    <a title="Overdrive  Reference"></a>

    <header class="header">
      <p class="header-col header-col--primary">
        <a class="header-link" href="index.html">
          Overdrive Docs
        </a>
        
      </p>
    
        <p class="header-col header-col--secondary">
          <a class="header-link" href="https://github.com/arikis/Overdrive">
            <img class="header-icon" src="img/gh.png"/>
            View on GitHub
          </a>
        </p>
    
    </header>

    <p class="breadcrumbs">
      <a class="breadcrumb" href="index.html">Overdrive Reference</a>
      <img class="carat" src="img/carat.png" />
      Overdrive  Reference
    </p>

    <div class="content-wrapper">
      <nav class="navigation">
        <ul class="nav-groups">
          <li class="nav-group-name">
            <a class="nav-group-name-link" href="Intro.html">Intro</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="getting-started.html">Getting Started</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="installation.html">Installation</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="state-machine.html">State Machine</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="complex-tasks.html">Complex Tasks</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="unit-testing.html">Unit Testing</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a class="nav-group-name-link" href="Classes.html">Classes</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Classes/Task.html">Task</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Classes/TaskQueue.html">TaskQueue</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Classes/InlineTask.html">InlineTask</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Classes.html#/s:C9Overdrive8TaskBase">TaskBase</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a class="nav-group-name-link" href="Protocols.html">Protocols</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Protocols/TaskObserver.html">TaskObserver</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Protocols/TaskCondition.html">TaskCondition</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Protocols/TaskQueueDelegate.html">TaskQueueDelegate</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a class="nav-group-name-link" href="Enums.html">Enums</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Enums/Result.html">Result</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Enums/TaskConditionResult.html">TaskConditionResult</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Enums/TaskConditionError.html">TaskConditionError</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a class="nav-group-name-link" href="More information.html">More information</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="license.html">License</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a class="nav-group-name-link" href="Other Guides.html">Other Guides</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="intro.html">Intro</a>
              </li>
            </ul>
          </li>
        </ul>
      </nav>
      <article class="main-content">

        <section class="section">
          <div class="section-content">
            
            <p><img src="http://i.imgur.com/pp7QHRW.png" width="40%" height="40%"/></p>

<p><a href="https://travis-ci.org/arikis/Overdrive"><img src="https://travis-ci.org/arikis/Overdrive.svg?branch=master" alt="Build Status"></a>
<img src="https://img.shields.io/badge/platform-%20iOS%20%7C%20macOS%20%7C%20tvOS%20%7C%20linux-gray.svg" alt="Plaforms">
<a href="https://github.com/Carthage/Carthage"><img src="https://img.shields.io/badge/Carthage-compatible-4BC51D.svg?style=flat" alt="Carthage Compatible"></a>
<a href="https://github.com/apple/swift-package-manager"><img src="https://img.shields.io/badge/SwiftPM-Compatible-brightgreen.svg" alt="Swift Package Manager Compatible"></a></p>

<p>Our apps constantly do work. The faster you react to user input and produce an output, the more likely is that the user will continue to use your application. As our applications grow in complexity, the more and more work needs to be done. You need to start thinking about how to categorize and optimize work, how to make that work more efficient, more optimized and finally, faster. In most cases that doesn’t end very well because you need to know a lot about concurrency, multithreading etc. - it’s a very complex field. You need to know all API specifics before you are able to write something.</p>

<p>Overdrive was created as a result of that struggle. It is a framework that exposes several simple concepts which are made on top of complex system frameworks that enable multithreading, concurrency and most importantly, more speed.</p>
<pre class="highlight swift"><code><span class="k">let</span> <span class="nv">task</span> <span class="o">=</span> <span class="kt">URLSessionTask</span><span class="p">(</span><span class="s">"https://api.swiftable.io"</span><span class="p">)</span>

<span class="n">task</span>
  <span class="o">.</span><span class="nf">retry</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
  <span class="o">.</span><span class="n">onValue</span> <span class="p">{</span> <span class="n">json</span> <span class="k">in</span>
    <span class="nf">print</span><span class="p">(</span><span class="n">json</span><span class="p">[</span><span class="s">"message"</span><span class="p">])</span>
  <span class="p">}</span><span class="o">.</span><span class="n">onError</span> <span class="p">{</span> <span class="n">error</span> <span class="k">in</span>
    <span class="nf">print</span><span class="p">(</span><span class="n">error</span><span class="p">)</span>
  <span class="p">}</span>

<span class="kt">TaskQueue</span><span class="o">.</span><span class="n">background</span><span class="o">.</span><span class="nf">add</span><span class="p">(</span><span class="nv">task</span><span class="p">:</span> <span class="n">task</span><span class="p">)</span>
</code></pre>
<a href='#contents' class='anchor' aria-hidden=true><span class="header-anchor"></span></a><h3 id='contents'>Contents:</h3>

<ul>
<li><a href="#what-can-i-do-with-overdrive">What can I do with Overdrive?</a></li>
<li><a href="#requirements">Requirements</a></li>
<li><a href="#usage">Usage</a></li>
<li><a href="#concurrency">Concurrency</a></li>
<li><a href="#thread-safety">Thread safety</a></li>
<li><a href="#inspiration">Inspiration</a></li>
<li><a href="https://arikis.github.io/Overdrive/latest/">Documentation</a>

<ul>
<li><a href="https://arikis.github.io/Overdrive/latest/getting-started.html">Getting Started</a></li>
<li><a href="https://arikis.github.io/Overdrive/latest/installation.html">Installation</a></li>
<li><a href="https://arikis.github.io/Overdrive/latest/complex-tasks.html">Complex tasks</a></li>
<li><a href="https://arikis.github.io/Overdrive/latest/state-machine.html">State Machine</a></li>
<li><a href="https://arikis.github.io/Overdrive/latest/unit-testing.html">Unit Testing</a></li>
</ul></li>
</ul>
<a href='#what-can-i-do-with-overdrive' class='anchor' aria-hidden=true><span class="header-anchor"></span></a><h2 id='what-can-i-do-with-overdrive'>What can I do with Overdrive?</h2>

<ul>
<li>[x] Execute tasks concurrently</li>
<li>[x] Utilize multi-core systems by default</li>
<li>[x] Easily defer task execution to custom thread or queue</li>
<li>[x] Ensure that multiple tasks are executed in the correct order</li>
<li>[x] Express custom conditions under which tasks can be executed</li>
<li>[x] Enforce testability</li>
<li>[x] Retry tasks that finished with errors</li>
<li>[x] Write thread safe code by default</li>
</ul>
<a href='#requirements' class='anchor' aria-hidden=true><span class="header-anchor"></span></a><h2 id='requirements'>Requirements</h2>

<ul>
<li>Xcode <code>8.0+</code></li>
<li>Swift 3</li>
<li>Platforms:

<ul>
<li>iOS <code>8.0+</code></li>
<li>macOS <code>10.11+</code></li>
<li>tvOS <code>9.0+</code></li>
<li>watchOS <code>2.0+</code></li>
<li>Ubuntu</li>
</ul></li>
</ul>
<a href='#installation' class='anchor' aria-hidden=true><span class="header-anchor"></span></a><h2 id='installation'>Installation</h2>
<a href='#a-href-https-github-com-carthage-carthage-carthage-a' class='anchor' aria-hidden=true><span class="header-anchor"></span></a><h4 id='a-href-https-github-com-carthage-carthage-carthage-a'><a href="https://github.com/Carthage/Carthage">Carthage</a></h4>
<pre class="highlight shell"><code>github <span class="s2">"arikis/Overdrive"</span> &gt;<span class="o">=</span> 0.2
</code></pre>
<a href='#a-href-https-github-com-cocoapods-cocoapods-cocoa-pods-a' class='anchor' aria-hidden=true><span class="header-anchor"></span></a><h4 id='a-href-https-github-com-cocoapods-cocoapods-cocoa-pods-a'><a href="https://github.com/CocoaPods/CocoaPods">Cocoa Pods</a></h4>
<pre class="highlight ruby"><code><span class="n">platform</span> <span class="ss">:ios</span><span class="p">,</span> <span class="s1">'8.0'</span>
<span class="n">use_frameworks!</span>

<span class="n">target</span> <span class="s1">'Your App Target'</span> <span class="k">do</span>
    <span class="n">pod</span> <span class="s1">'Overdrive'</span><span class="p">,</span> <span class="s1">'~&gt; 0.2'</span>
<span class="k">end</span>
</code></pre>
<a href='#a-href-https-github-com-apple-swift-package-manager-swift-package-manager-a' class='anchor' aria-hidden=true><span class="header-anchor"></span></a><h4 id='a-href-https-github-com-apple-swift-package-manager-swift-package-manager-a'><a href="https://github.com/apple/swift-package-manager">Swift Package Manager</a></h4>
<pre class="highlight swift"><code><span class="kd">import</span> <span class="kt">PackageDescription</span>

<span class="k">let</span> <span class="nv">package</span> <span class="o">=</span> <span class="kt">Package</span><span class="p">(</span>
  <span class="nv">name</span><span class="p">:</span> <span class="s">"Your Package Name"</span><span class="p">,</span>
  <span class="nv">dependencies</span><span class="p">:</span> <span class="p">[</span>
    <span class="o">.</span><span class="kt">Package</span><span class="p">(</span><span class="nv">url</span><span class="p">:</span> <span class="s">"https://github.com/arikis/Overdrive.git"</span><span class="p">,</span>
            <span class="nv">majorVersion</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
            <span class="nv">minor</span><span class="p">:</span> <span class="mi">2</span><span class="p">)</span>
  <span class="p">]</span>
<span class="p">)</span>
</code></pre>
<a href='#manual-installation' class='anchor' aria-hidden=true><span class="header-anchor"></span></a><h4 id='manual-installation'>Manual installation</h4>

<p><code>Overdrive</code> can also be installed manually by dragging the <code>Overdrive.xcodeproj</code> to your project and adding <code>Overdrive.framework</code> to the embedded libraries in project settings.</p>
<a href='#usage' class='anchor' aria-hidden=true><span class="header-anchor"></span></a><h2 id='usage'>Usage</h2>

<p>Overdrive features two main classes:</p>

<ul>
<li><a href="https://github.com/arikis/Overdrive/blob/docs/Sources/Overdrive/Task.swift"><code>Task&lt;T&gt;</code></a> - Used to encapsulate any asynchronous or synchronous work - <a href="https://arikis.github.io/Overdrive/latest/Classes/Task.html">Documentation</a></li>
<li><a href="https://github.com/arikis/Overdrive/blob/docs/Sources/Overdrive/TaskQueue.swift"><code>TaskQueue</code></a> - Used to execute tasks and manage concurrency and multi threading -  <a href="https://arikis.github.io/Overdrive/latest/Classes/TaskQueue.html">Documentation</a></li>
</ul>

<p><strong>Workflow:</strong></p>

<ol>
<li>Create subclass of <code>Task&lt;T&gt;</code></li>
<li>Override <code>run()</code> method and encapsulate any synchronous or asynchronous operation</li>
<li>Finish execution with <code>value(T)</code> or <code>error(Error)</code> by using <code>finish(with:)</code> method</li>
<li>Create instance of subclass</li>
<li>Add it to the <code>TaskQueue</code> when you want to start execution</li>
</ol>

<p>Example <code>Task&lt;UIImage&gt;</code> subclass for photo download task:</p>
<pre class="highlight swift"><code><span class="kd">class</span> <span class="kt">GetLogoTask</span><span class="p">:</span> <span class="kt">Task</span><span class="o">&lt;</span><span class="kt">UIImage</span><span class="o">&gt;</span> <span class="p">{</span>

  <span class="k">override</span> <span class="kd">func</span> <span class="nf">run</span><span class="p">()</span> <span class="p">{</span>
      <span class="k">let</span> <span class="nv">logoURL</span> <span class="o">=</span> <span class="kt">URL</span><span class="p">(</span><span class="nv">string</span><span class="p">:</span> <span class="s">"https://swiftable.io/logo.png"</span><span class="p">)</span><span class="o">!</span>

      <span class="k">do</span> <span class="p">{</span>
          <span class="k">let</span> <span class="nv">logoData</span> <span class="o">=</span> <span class="k">try</span> <span class="kt">Data</span><span class="p">(</span><span class="nv">contentsOf</span><span class="p">:</span> <span class="n">logoURL</span><span class="p">)</span>
          <span class="k">let</span> <span class="nv">image</span> <span class="o">=</span> <span class="kt">UIImage</span><span class="p">(</span><span class="nv">data</span><span class="p">:</span> <span class="n">logoData</span><span class="p">)</span><span class="o">!</span>
          <span class="nf">finish</span><span class="p">(</span><span class="nv">with</span><span class="p">:</span> <span class="o">.</span><span class="nf">value</span><span class="p">(</span><span class="n">image</span><span class="p">))</span> <span class="c1">// finish with image</span>
      <span class="p">}</span> <span class="k">catch</span> <span class="p">{</span>
          <span class="nf">finish</span><span class="p">(</span><span class="nv">with</span><span class="p">:</span> <span class="o">.</span><span class="nf">error</span><span class="p">(</span><span class="n">error</span><span class="p">))</span> <span class="c1">// finish with error if any</span>
      <span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre>

<p>To setup completion blocks, you use <code>onValue</code> and <code>onError</code> methods:</p>
<pre class="highlight swift"><code><span class="k">let</span> <span class="nv">logoTask</span> <span class="o">=</span> <span class="kt">GetLogoTask</span><span class="p">()</span>

<span class="n">logoTask</span>
    <span class="o">.</span><span class="n">onValue</span> <span class="p">{</span> <span class="n">logo</span> <span class="k">in</span>
        <span class="nf">print</span><span class="p">(</span><span class="n">logo</span><span class="p">)</span> <span class="c1">// UIImage object</span>
    <span class="p">}</span><span class="o">.</span><span class="n">onError</span> <span class="p">{</span> <span class="n">error</span> <span class="k">in</span>
        <span class="nf">print</span><span class="p">(</span><span class="n">error</span><span class="p">)</span>
<span class="p">}</span>
</code></pre>

<p>To execute the task add it to the instance of <code>TaskQueue</code></p>
<pre class="highlight swift"><code><span class="k">let</span> <span class="nv">queue</span> <span class="o">=</span> <span class="kt">TaskQueue</span><span class="p">()</span>
<span class="n">queue</span><span class="o">.</span><span class="nf">add</span><span class="p">(</span><span class="nv">task</span><span class="p">:</span> <span class="n">logoTask</span><span class="p">)</span>
</code></pre>
<a href='#concurrency' class='anchor' aria-hidden=true><span class="header-anchor"></span></a><h2 id='concurrency'>Concurrency</h2>

<p><code>TaskQueue</code> executes tasks concurrently by default. Maximum number of concurrent operations is defined by the current system conditions. If you want to limit the number of maximum concurrent task executions use <code>maxConcurrentTaskCount</code> property.</p>
<pre class="highlight swift"><code><span class="k">let</span> <span class="nv">queue</span> <span class="o">=</span> <span class="kt">TaskQueue</span><span class="p">()</span>
<span class="n">queue</span><span class="o">.</span><span class="n">maxConcurrentTaskCount</span> <span class="o">=</span> <span class="mi">3</span>
</code></pre>
<a href='#thread-safety' class='anchor' aria-hidden=true><span class="header-anchor"></span></a><h2 id='thread-safety'>Thread safety</h2>

<p>All task properties are thread-safe by default, meaning that you can access them from any thread or queue and not worry about locks and access synchronization.</p>
<a href='#inspiration' class='anchor' aria-hidden=true><span class="header-anchor"></span></a><h2 id='inspiration'>Inspiration</h2>

<p><code>Overdrive</code> framework was heavily inspired by talks and code from several Apple WWDC videos.</p>

<ul>
<li><a href="https://developer.apple.com/videos/play/wwdc2015/408/">Protocol Oriented Programming</a></li>
<li><a href="https://developer.apple.com/videos/play/wwdc2015/226/">Advanced NSOperations</a></li>
<li><a href="https://developer.apple.com/videos/play/wwdc2016/419/">Protocol and Value Oriented Programming</a></li>
</ul>

<blockquote>
<p><code>Overdrive</code> is a term for an effect used in electric guitar playing that occurs when guitar amp tubes starts to produce overdriven, almost distorted sound, due to the higher gain(master) setting.</p>
</blockquote>

          </div>
        </section>


      </article>
    </div>
    <section class="footer">
      <p>&copy; 2016 <a class="link" href="http://swiftable.io" target="_blank" rel="external">Swiftable</a>. All rights reserved. (Last updated: 2016-11-20)</p>
      <p>Generated by <a class="link" href="https://github.com/realm/jazzy" target="_blank" rel="external">jazzy ♪♫ v0.7.2</a>, a <a class="link" href="http://realm.io" target="_blank" rel="external">Realm</a> project.</p>
    </section>
  </body>
</div>
</html>
